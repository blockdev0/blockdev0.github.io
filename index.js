let addUsername=async user=>{$("#users").empty();try{await eval("var profile="+user.json_metadata);var profile_img_link=profile.profile.profile_image}catch(a){var profile_img_link="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/600px-No_image_available.svg.png"}console.log(profile_img_link);var display="<div><div class = \"user\"><h1>"+user.name+"</h1><img class = \"userImg\" src="+profile_img_link+"><h6>Balance:</h6><h6>"+user.balance+" | "+user.sbd_balance+"</h6><h6>Savings:</h6><h6>"+user.savings_balance+" | "+user.savings_sbd_balance+"</h6><div id = \"earnings\" ></div></div>";"</div>",$("#users").append(display)},getIntervals=(a,b)=>{let c=b,d=[],e=[];for(;c<a;)d.push(c),c+=b,e.push(b-1);return d.push(a),e.push(a-c+b-1),[d,e]},convertSBTtoFloat=a=>{return parseFloat(a.replace("SBD",""))},calculateEarnings=async a=>{steem.api.getAccountHistory(a.name,-1,0,(b,c)=>{for(x=c[0][0],limit=1e4,intervals=getIntervals(x,limit),from=intervals[0],limits=intervals[1],i=0;i<from.length;++i)steem.api.getAccountHistory(a.name,from[i],limits[i],(d,e)=>{let f=e.filter(g=>"author_reward"==g[1].op[0]);for(money=0,i=0;i<f.length;++i)money+=convertSBTtoFloat(f[i][1].op[1].sbd_payout);console.log(money),t1=f[0][1].timestamp.substring(0,10),t2=f[f.length-1][1].timestamp.substring(0,10),$("#earnings").append("<div class = \"reward\"><h5 class = \"dates\" >"+t1.toString()+" -- "+t2.toString()+"</h5><h5 class = \"money\" >  "+money.toString()+"</h5></div>")})})},btnFunction=async()=>{var a=[document.getElementById("userName").value],b=await steem.api.getAccountsAsync(a),c=b[0];console.log(c),addUsername(c),calculateEarnings(c)};
